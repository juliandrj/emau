<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet" href="css/animate.min.css">
<link rel="stylesheet" href="css/jcider.css">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="css/emau.css">
<title>cargando...</title>
<!-- script type="text/javascript" src="js/jquery.js"></script -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
<script type="text/javascript" src="js/jquery.easing.min.js"></script>
<script type="text/javascript" src="js/jquery.enllax.min.js"></script>
<script type="text/javascript" src="js/jcider.min.js"></script>
<!-- script type="text/javascript" src="js/jquery.fittext.js"></script -->
<!-- script type="text/javascript" src="js/wow.min.js"></script -->
<!-- script type="text/javascript" src="js/waypoint.js"></script -->
<!-- script type="text/javascript" src="js/jquery.stellar.min.js"></script -->
<script type="text/javascript">
	var EmauVM = function() {
		var self = this;
		self.doc = ko.observable();
		self.agregarNumeral = function (valor) {
			return '#' + valor;
		};
	};
	var emau = new EmauVM();
	$(document).ready(function() {
		$('#loading').modal();
		var hbar = $('#mainNav').height();
		$(window).resize(function () {
			var hportada = $('#portada').height();
			$('.slider').height(hportada);
			$('.lslide').height(hportada);
			$(window).enllax();
		});
		$.ajax({
			url : 'backend/',
			type : 'get',
			dataType : 'json',
			success : function(data) {
				emau.doc(data);
				document.title = data.titulo;
				(function($) {
					"use strict"; // Start of use strict
					// jQuery for page scrolling feature - requires jQuery Easing plugin
					$('a.page-scroll').bind('click', function(event) {
						var $anchor = $(this);
						$('html, body').stop().animate({
							scrollTop : ($($anchor.attr('href')).offset().top)
						}, 1250, 'easeInOutExpo');
						event.preventDefault();
					});
					// Highlight the top nav as scrolling occurs
					$('body').scrollspy({
						target : '.navbar-fixed-top',
						offset : 51
					})
					// Closes the Responsive Menu on Menu Item Click
					$('.navbar-collapse ul li a').click(function() {
						$('.navbar-toggle:visible').click();
					});
					// Offset for Main Navigation
					$('#mainNav').affix({
						offset : {
							top : 100
						}
					})
					// Initialize WOW.js Scrolling Animations
					//new WOW().init();
				})(jQuery); // End of use strict
				var hportada = $('#portada').height();
				$('.slider').height(hportada);
				$('.lslide').height(hportada);
				$('.slider').jcider({
					pagination: true,
					autoplay: true,
					slideDuration: 5000
				});
				$(window).enllax();
				$('#loading').modal('hide');
			},
			error : function(jqXHR, textStatus, errorThrown) {
				console.log(errorThrown);
				$('#loading').modal('hide');
			}
		});
		ko.applyBindings(emau);
	});
</script>
</head>
<body id="page-top">
	<div id="loading" class="modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					<h3>cargando...</h3>
					<div class="progress">
						<div class="progress-bar progress-bar-striped active"
							role="progressbar" aria-valuenow="100" aria-valuemin="0"
							aria-valuemax="100" style="width: 100%">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_ppal">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<!-- ko if: doc -->
				<a class="navbar-brand page-scroll" href="#page-top" data-bind="text: doc().titulo"></a>
				<!-- /ko -->
			</div>
			<div class="collapse navbar-collapse" id="menu_ppal">
				<!-- ko if: doc -->
				<ul class="nav navbar-nav navbar-right" data-bind="foreach: doc().modulos">
					<li><a class="page-scroll" data-bind="text: $data.titulo, attr: {href: '#' + $data.id}"></a></li>
				</ul>
				<!-- /ko -->
			</div>
		</div>
	</nav>
	<header id="portada" class="slide" data-enllax-ratio="-0.3">
		<div class="header-content img-rounded">
			<div class="header-content-inner">
				<!-- ko if: doc -->
				<img src="backend/images/logo.png" data-bind="attr: {alt: doc().titulo}">
				<h1 data-bind="text: doc().descripcion"></h1>
				<!-- /ko -->
			</div>
		</div>
	</header>
	<!-- ko if: doc -->
	<div data-bind="foreach: doc().modulos">
		<section class="slide" data-bind="attr: {id: $data.id}">
			<div class="slider">
				<div data-bind="foreach: $data.contenido.contenido">
					<div data-enllax-ratio="1.5" data-bind="style: {'background-image': 'url(backend/' + imgs.image_intro + ')'}">
						<article class="caja img-rounded">
							<h3 data-bind="text: titulo"></h3>
							<p data-bind="text: introtext"></p>
						</article>
					</div>
				</div>
			</div>
			<h2 class="slideno" data-bind="text: $data.titulo"></h2>
		</section>
	</div>
	<!-- /ko -->
</body>
</html>